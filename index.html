<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Admin ‚Ä¢ BJP Digital Cell</title>
  
  <!-- Font & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    :root {
      --sidebar-width: 260px;
      --header-height: 60px;
      --brand: #ff6a00;
      --brand-dark: #cc5500;
      --accent: #1F3B73;
      --bg: #f4f6f9;
      --text: #333;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Noto Sans Devanagari', sans-serif; background: var(--bg); display: flex; height: 100vh; overflow: hidden; }

    /* Login Screen Overlay */
    #loginOverlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(135deg, var(--brand), var(--brand-dark));
      z-index: 9999; display: flex; align-items: center; justify-content: center;
      flex-direction: column; color: white;
    }
    .login-box {
      background: white; padding: 30px; border-radius: 12px;
      text-align: center; width: 320px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .login-box h2 { color: var(--accent); margin-bottom: 20px; }
    .login-box input {
      width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px;
      margin-bottom: 15px; font-size: 16px; outline: none;
    }
    .login-box button {
      width: 100%; padding: 12px; background: var(--brand); color: white;
      border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer;
    }
    .login-box button:hover { background: var(--brand-dark); }

    /* Share Links Modal */
    #shareModal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6); z-index: 5000; align-items: center; justify-content: center;
    }
    .share-box {
      background: white; width: 90%; max-width: 500px; padding: 25px; border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3); position: relative;
    }
    .share-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
    .share-header h3 { margin: 0; color: var(--accent); }
    .close-btn { background: none; border: none; font-size: 20px; cursor: pointer; color: #666; }
    
    .link-item { margin-bottom: 15px; }
    .link-item label { display: block; font-size: 13px; color: #666; margin-bottom: 5px; font-weight: 600; }
    .link-input-group { display: flex; gap: 8px; }
    .link-input-group input { 
      flex: 1; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; 
      background: #f9f9f9; font-size: 13px; color: #333; 
    }
    .link-input-group button {
      padding: 8px 12px; background: var(--accent); color: white; border: none; 
      border-radius: 6px; cursor: pointer; font-size: 13px; white-space: nowrap;
    }
    .link-input-group button:hover { background: #2c4f96; }
    .link-input-group button.copied { background: #4CAF50; }

    /* Sidebar */
    .sidebar {
      width: var(--sidebar-width);
      background: #1e293b;
      color: white;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      transition: all 0.3s;
    }
    .logo {
      height: var(--header-height);
      display: flex; align-items: center; padding: 0 20px;
      background: rgba(0,0,0,0.2); font-weight: bold; font-size: 18px;
      color: var(--brand); letter-spacing: 1px;
    }
    .nav-links { flex: 1; padding: 20px 0; overflow-y: auto; }
    .nav-item {
      padding: 12px 20px; display: flex; align-items: center; gap: 12px;
      color: #cbd5e1; text-decoration: none; cursor: pointer;
      border-left: 4px solid transparent; transition: 0.2s;
    }
    .nav-item:hover, .nav-item.active {
      background: rgba(255, 255, 255, 0.05);
      color: white; border-left-color: var(--brand);
    }
    .nav-header {
      padding: 15px 20px 5px; font-size: 11px; text-transform: uppercase;
      color: #64748b; font-weight: bold;
    }

    /* Main Content */
    .main { flex: 1; display: flex; flex-direction: column; width: 100%; }
    
    .header {
      height: var(--header-height); background: white;
      border-bottom: 1px solid #e2e8f0; display: flex; align-items: center;
      justify-content: space-between; padding: 0 20px;
    }
    .header h2 { font-size: 18px; color: var(--accent); }
    .logout-btn {
      color: #ef4444; font-weight: 600; cursor: pointer; font-size: 14px;
      display: flex; align-items: center; gap: 5px;
    }
    .share-trigger {
      background: #eef2ff; color: var(--accent); padding: 6px 12px; border-radius: 20px;
      font-size: 13px; font-weight: 600; cursor: pointer; margin-right: 15px; border: 1px solid #dbeafe;
      display: flex; align-items: center; gap: 6px;
    }
    .share-trigger:hover { background: #dbeafe; }

    /* Content Frame */
    .content-area {
      flex: 1; background: #f1f5f9; padding: 0; position: relative;
    }
    iframe {
      width: 100%; height: 100%; border: none; display: block;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .sidebar { position: absolute; left: -100%; height: 100%; z-index: 100; }
      .sidebar.open { left: 0; }
      .menu-toggle { display: block; cursor: pointer; font-size: 20px; margin-right: 15px; }
      .header h2 { font-size: 16px; }
      .share-trigger span { display: none; } /* Hide text on mobile */
    }
    @media (min-width: 769px) { .menu-toggle { display: none; } }
  </style>
</head>
<body>

  <!-- 1. LOGIN OVERLAY -->
  <div id="loginOverlay">
    <div style="margin-bottom:20px; font-size:40px; background:white; color:#ff6a00; width:80px; height:80px; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 10px rgba(0,0,0,0.2);">
        <i class="fa-solid fa-om"></i>
    </div>
    <div class="login-box">
      <h2>Super Admin Login</h2>
      <input type="password" id="adminPass" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§°‡§æ‡§≤‡•á‡§Ç (bjp123)">
      <button onclick="checkLogin()">‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç</button>
      <p id="errorMsg" style="color:red; font-size:12px; margin-top:10px; display:none;">‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°!</p>
    </div>
  </div>

  <!-- 2. SHARE LINKS MODAL -->
  <div id="shareModal">
    <div class="share-box">
      <div class="share-header">
        <h3>üîó ‡§™‡§¨‡•ç‡§≤‡§ø‡§ï ‡§´‡•â‡§∞‡•ç‡§Æ ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ (‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç)</h3>
        <button class="close-btn" onclick="toggleShareModal(false)">&times;</button>
      </div>
      <p style="font-size:13px; color:#666; margin-bottom:15px;">‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§ï‡•ã ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§ï‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ‡§ì‡§Ç ‡§Ø‡§æ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï ‡§ï‡•ã ‡§≠‡•á‡§ú‡•á‡§Ç‡•§ ‡§Ø‡•á ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§¨‡§ø‡§®‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§ñ‡•Å‡§≤‡•á‡§Ç‡§ó‡•á‡•§</p>
      
      <div class="link-item">
        <label>üìù ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§´‡•â‡§∞‡•ç‡§Æ (‡§Æ‡§Ç‡§°‡§≤ ‡§Ö‡§ß‡•ç‡§Ø‡§ï‡•ç‡§∑ ‡§ï‡•á ‡§≤‡§ø‡§è)</label>
        <div class="link-input-group">
          <input type="text" id="linkReport" readonly>
          <button onclick="copyLink('linkReport', this)">Copy</button>
        </div>
      </div>

      <div class="link-item">
        <label>üë§ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï ‡§´‡•â‡§∞‡•ç‡§Æ (‡§®‡§Ø‡§æ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è)</label>
        <div class="link-input-group">
          <input type="text" id="linkCoordinator" readonly>
          <button onclick="copyLink('linkCoordinator', this)">Copy</button>
        </div>
      </div>

      <div class="link-item">
        <label>üóìÔ∏è ‡§á‡§µ‡•á‡§Ç‡§ü ‡§´‡•â‡§∞‡•ç‡§Æ (‡§®‡§Ø‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è)</label>
        <div class="link-input-group">
          <input type="text" id="linkEvent" readonly>
          <button onclick="copyLink('linkEvent', this)">Copy</button>
        </div>
      </div>

      <div class="link-item">
        <label>üö∂‚Äç‚ôÇÔ∏è ‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞ ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä (‡§∞‡§ø‡§∏‡•á‡§™‡•ç‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è)</label>
        <div class="link-input-group">
          <input type="text" id="linkVisitor" readonly>
          <button onclick="copyLink('linkVisitor', this)">Copy</button>
        </div>
      </div>

    </div>
  </div>

  <!-- 3. SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <div class="logo">
      <i class="fa-solid fa-landmark" style="margin-right:10px;"></i> BJP DIGITAL
    </div>
    <div class="nav-links">
      <div class="nav-header">MAIN</div>
      <div class="nav-item active" onclick="loadFrame('visitor/admin.html', '‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏')">
        <i class="fa-solid fa-users"></i> ‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏
      </div>
      
      <div class="nav-header">‡§™‡•ç‡§∞‡§µ‡§æ‡§∏ ‡§Æ‡•à‡§®‡•á‡§ú‡§Æ‡•á‡§Ç‡§ü</div>
      <div class="nav-item" onclick="loadFrame('pravas/index.html', '‡§™‡•ç‡§∞‡§µ‡§æ‡§∏ Hub (PDF/TV)')">
        <i class="fa-solid fa-tv"></i> ‡§™‡•ç‡§∞‡§µ‡§æ‡§∏ Hub
      </div>
      <div class="nav-item" onclick="loadFrame('pravas/karyakram_bulk_pdf_export.html', '‡§™‡•ç‡§∞‡§µ‡§æ‡§∏ PDF Export')">
        <i class="fa-solid fa-file-pdf"></i> PDF ‡§è‡§ï‡•ç‡§∏‡§™‡•ã‡§∞‡•ç‡§ü
      </div>

      <div class="nav-header">‡§Æ‡§Ç‡§°‡§≤ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§ø‡§Ç‡§ó</div>
      <div class="nav-item" onclick="loadFrame('mandal/dashboard.html', '‡§Æ‡§Ç‡§°‡§≤ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°')">
        <i class="fa-solid fa-chart-pie"></i> ‡§Æ‡§Ç‡§°‡§≤ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°
      </div>
      <!-- Internal Admin Forms -->
      <div class="nav-item" onclick="loadFrame('mandal/event.html', '‡§®‡§Ø‡§æ ‡§á‡§µ‡•á‡§Ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç')">
        <i class="fa-solid fa-plus-circle"></i> ‡§á‡§µ‡•á‡§Ç‡§ü ‡§ú‡•ã‡§°‡§º‡•á‡§Ç (Admin)
      </div>
      <div class="nav-item" onclick="loadFrame('mandal/coordinator.html', '‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®')">
        <i class="fa-solid fa-user-tie"></i> ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï ‡§ú‡•ã‡§°‡§º‡•á‡§Ç (Admin)
      </div>

      <div class="nav-header">Tools</div>
      <div class="nav-item" onclick="toggleShareModal(true)">
        <i class="fa-solid fa-share-nodes"></i> <b>‡§≤‡§ø‡§Ç‡§ï ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç</b>
      </div>
      <div class="nav-item" onclick="loadFrame('visitor/importer.html', 'CSV ‡§°‡§æ‡§ü‡§æ ‡§á‡§Æ‡•ç‡§™‡•ã‡§∞‡•ç‡§ü')">
        <i class="fa-solid fa-upload"></i> ‡§°‡§æ‡§ü‡§æ ‡§á‡§Æ‡•ç‡§™‡•ã‡§∞‡•ç‡§ü
      </div>
      <div class="nav-item" onclick="window.location.href='index.html'">
        <i class="fa-solid fa-home"></i> ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Å
      </div>
    </div>
  </div>

  <!-- 4. MAIN AREA -->
  <div class="main">
    <div class="header">
      <div style="display:flex; align-items:center;">
        <i class="fa-solid fa-bars menu-toggle" onclick="toggleSidebar()"></i>
        <h2 id="pageTitle">‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏</h2>
      </div>
      <div style="display:flex; align-items:center;">
        <button class="share-trigger" onclick="toggleShareModal(true)">
          <i class="fa-solid fa-link"></i> <span>Form Links</span>
        </button>
        <div class="logout-btn" onclick="logout()">
          <i class="fa-solid fa-power-off"></i> <span style="margin-left:5px">Log Out</span>
        </div>
      </div>
    </div>
    
    <div class="content-area">
      <!-- Default loads Visitor Admin -->
      <iframe id="appFrame" src=""></iframe>
    </div>
  </div>

  <script>
    // Security & Logic
    const PASS = "bjp123"; // Admin Password
    const overlay = document.getElementById('loginOverlay');
    const iframe = document.getElementById('appFrame');
    const pageTitle = document.getElementById('pageTitle');
    const items = document.querySelectorAll('.nav-item');

    // Check Login
    function checkLogin() {
      const inp = document.getElementById('adminPass').value;
      if (inp === PASS) {
        overlay.style.display = 'none';
        sessionStorage.setItem('isLoggedIn', 'true');
        // Load default page only after login
        if(!iframe.src || iframe.src === window.location.href) {
            loadFrame('visitor/admin.html', '‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏');
        }
      } else {
        document.getElementById('errorMsg').style.display = 'block';
      }
    }

    // Auto-login if session exists
    if (sessionStorage.getItem('isLoggedIn') === 'true') {
      overlay.style.display = 'none';
      loadFrame('visitor/admin.html', '‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏');
    }

    function logout() {
      sessionStorage.removeItem('isLoggedIn');
      location.reload();
    }

    function loadFrame(url, title) {
      // Remove active class from all
      items.forEach(i => i.classList.remove('active'));
      // Add active class to clicked
      event.currentTarget.classList.add('active');
      
      iframe.src = url;
      pageTitle.textContent = title;
      
      // On mobile, close sidebar after click
      if(window.innerWidth <= 768) {
        document.getElementById('sidebar').classList.remove('open');
      }
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }

    // --- SHARE LINK LOGIC ---
    function toggleShareModal(show) {
      const modal = document.getElementById('shareModal');
      modal.style.display = show ? 'flex' : 'none';
      if(show) generateLinks();
    }

    function generateLinks() {
      // Get base URL (e.g., https://username.github.io/repo/ OR http://127.0.0.1:5500/)
      // We assume super_admin.html is in the root along with visitor/, mandal/ folders
      const basePath = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);

      document.getElementById('linkReport').value = basePath + 'mandal/report.html';
      document.getElementById('linkCoordinator').value = basePath + 'mandal/coordinator.html';
      document.getElementById('linkEvent').value = basePath + 'mandal/event.html';
      document.getElementById('linkVisitor').value = basePath + 'visitor/index.html';
    }

    function copyLink(inputId, btn) {
      const input = document.getElementById(inputId);
      input.select();
      input.setSelectionRange(0, 99999); // For mobile
      navigator.clipboard.writeText(input.value).then(() => {
        const originalText = btn.textContent;
        btn.textContent = "Copied!";
        btn.classList.add('copied');
        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('copied');
        }, 2000);
      });
    }

    // Handle click outside modal
    window.onclick = function(event) {
      const modal = document.getElementById('shareModal');
      if (event.target == modal) {
        toggleShareModal(false);
      }
    }
  </script>
</body>
</html>
